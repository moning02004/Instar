{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="position-relative" style="width: 100%; height: 83vh; margin-top: 7vh;">
    <div class="position-absolute bg-white" style="left:0; width: 70%; height: 83vh">
        <div class="image-set p-3" style="height: 83vh;">
            {% for img in post.file_set.all %}
                {% if forloop.first %}
                    <img class="img active" src="{{ img.file.url }}">
                {% else %}
                    <img class="img none" src="{{ img.file.url }}">
                {% endif %}
            {% endfor %}
        </div>
    </div>
    <button class="btn prev none"> < </button>
    <button class="btn next"> > </button>

    <div class="position-absolute bg-white border-left" style="left:70%; width: 30%; height: 83vh">
        <div class="card" style="height: 83vh">
            <div class="card-header bg-white">
                <div class="d-flex">
                    {% include 'app_main/_profile_image.html' with profile=post.author %}
                    <button class="btn p-0 ml-auto detail-modal" value="{{ post.id }}"><i class="fas fa-ellipsis-v"></i></button>
                </div>
            </div>
            <div class="card-body border-bottom post-content" style="height: 25vh;">
                <div class="ml-3 pre-box">{{ post.content }}</div>
            </div>
            <div class="card-body border-bottom post-content" style="height: 25vh;">
                {% for comment in post.comment_set.all %}
                    {% if comment.comment is None %}
                        <div><b class="mr-2">{{ comment.author.name }}</b> {{ comment.content }}</div>
                    {% endif %}

                {% endfor %}
            </div>
            <div class="card-body border-bottom">
                <button class="btn"><i class="far fa-heart font-size-13"></i><small>{{ post.heart_set.all|length }}</small></button>
                <button class="btn"><i class="far fa-comment font-size-13"></i><small>{{ post.comment_set.all|length }}</small></button>
                <small class="ml-3">{{ post.different_day }}</small>
            </div>

            <form action="" method="post">{% csrf_token %}
                <div class="card-footer input-group p-1">
                    <input class="form-control" type="text" name="comment" />
                    <div class="input-group-append">
                        <button class="btn input-group-text" type="submit">게시</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="mt-3 py-3 text-center">다른 게시물</div>
{% include 'app_post/_post_list.html' with post_list=post.author.post_set.all %}

<script src="{% static 'js/image.js' %}"></script>

{% include 'modals/m_detail.html' with post=post %}

{% endblock %}
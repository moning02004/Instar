{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="position-relative" style="height: 90vh;">
    <div class="position-absolute bg-white h-100" style="left:0; width: 70%;">
        {% include 'post/_post_image.html' %}
    </div>

    <div class="position-absolute bg-white border-left h-100" style="left:70%; width: 30%;">
        <div class="card h-100">
            <div class="card-header bg-white d-flex">
                <div class="post-header">{% include 'post/_post_profile.html' with profile=post.author %}</div>
                <button class="btn p-0 ml-auto m-option" value="{{ post.id }}"><i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
            <div class="card-body border-bottom post-content h-50">
                <div class="ml-3 pre-box">{{ post.content }}</div>
            </div>

            <div class="card-body border-bottom post-content h-75">
                {% for comment in post.comment_set.all %}
                    {% if comment.comment is None %}
                        <div class="mb-3">
                            <div class="comment my-auto">
                                {% include 'post/_post_profile.html' with profile=comment.author %}
                            </div>
                            <div class="row ml-5">
                                <div class="my-auto pre-box">{{ comment.content }}</div>
                                <button class="btn ml-auto py-0" value="{{post.id}}"><i class="far fa-heart"></i></button>
                            </div>
                            <div class="d-flex justify-content-end">
                                <small class="my-auto">{{ comment.created|different_day }}</small>
                                <button class="btn my-auto">답글달기</button>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            {% include 'post/_post_heart.html' %}

            <div class="card-footer p-1">
                {% include 'post/_post_comment_form.html' %}
            </div>
        </div>
    </div>
</div>

<div class="mt-3 py-3 text-center">다른 게시물</div>
<div style="height: 30vh;">
    {% include 'post/_post_list.html' with post_list=post.author.post_set.all %}
</div>

{% include 'modals/m_detail.html' with post=post %}

{% load static %}
<script src="{% static 'js/image.js' %}"></script>
{% endblock %}